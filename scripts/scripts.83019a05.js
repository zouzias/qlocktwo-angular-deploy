"use strict";angular.module("qlocktwoAngularApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","FBAngular"]).config(["$routeProvider",function(a){a.when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/qlocktwo",{templateUrl:"views/qlocktwo.html",controller:"QlocktwoCtrl",controllerAs:"qlocktwo"}).otherwise({redirectTo:"/qlocktwo"})}]),angular.module("qlocktwoAngularApp").service("LetterGridService",function(){var a=["NSEVENFOURC","FELEVENOTWO","TWELVEFIVEV","TEIGHTENONE","TNINETHREEL","SIXHALFIFTY","EFORTYYPAST","OFTHIRTYTEN","TOTWENTYSIX","TWCLOCKFIVE","FIFTEENTONE"],b=a.length,c=a[0].length,d=a.map(function(a){return a.split("").map(function(a){return{"char":a,selected:Math.random()>.5}})});return{searchGrid:a,grid:d,numRows:b,numCols:c}}),angular.module("qlocktwoAngularApp").service("CurrentTimeService",["$rootScope","TimeToPhrases",function(a,b){var c=1e4,d=b.minutes,e=b.hours,f={now:new Date,indexHour:0,indexMinute:0,hours:e,minutes:d};return f.updateTime=function(){f.now=new Date,a.$emit("TIME_UPDATED")},f.updateLater=function(){setTimeout(function(){console.log("Time state updated..."+f.now),f.updateTime(),f.updateLater()},c)},f.nextTime=function(){f.indexMinute<d.length-1?f.indexMinute=f.indexMinute+1:f.indexHour<e.length-1?(f.indexMinute=0,f.indexHour=f.indexHour+1):(f.indexHour=0,f.indexMinute=0)},f.previousTime=function(){f.indexMinute>0?f.indexMinute=f.indexMinute-1:f.indexHour>0?(f.indexMinute=0,f.indexHour=f.indexHour-1):(f.indexMinute=d.length-1,f.indexHour=e.length-1)},f.updateLater(),f}]),angular.module("qlocktwoAngularApp").controller("QlocktwoCtrl",["$rootScope","$scope","LetterGridService","CurrentTimeService",function(a,b,c,d){b.grid=c.grid;var e=d.hours.map(function(a){return a.word}),f=d.minutes.map(function(a){return a.word});b.currentHour=e[d.indexHour],b.currentMinute=f[d.indexMinute],b.currentTime=d.now,a.$on("TIME_UPDATED",function(){console.log("Event got on controller"),b.$apply(function(){b.currentTime=d.now}),b.updateTimePhrases(),console.log("Updated time is "+b.currentTime)}),b.updateTimePhrases=function(){var a=b.currentTime.getHours(),c=b.currentTime.getMinutes();b.currentHour=d.hours.filter(function(b){return b.hour===a}).map(function(a){return a.word}).shift(),console.log("CurrentTimeService hours is  "+d.hours[a]),b.currentMinute=d.minutes.filter(function(a){return a.start<=c&&c<=a.end}).map(function(a){return a.word}).shift(),b.resetGrid();var e=b.highlightWord(b.currentHour,0,0);b.highlightWord(b.currentMinute,e.row,e.col)},b.resetGrid=function(){c.grid=c.grid.map(function(a){return a.map(function(a){return{"char":a["char"],selected:!1}})}),b.grid=c.grid},b.findWord=function(a,b,c,d){var e=a.map(function(a,c){var d=a.indexOf(b.toUpperCase());return{row:c,col:d,sz:b.length}}).filter(function(a){return-1!==a.col}).filter(function(a){return a.row>c||a.row===c&&a.col>=d});return e},b.highlightWord=function(a,d,e){var f=b.findWord(c.searchGrid,a,d,e);if(0===f.length)return{row:d,col:e};for(var g=f[0].row,h=f[0].col,i=f[0].sz,j=0;i>j;j++)c.grid[g][h+j].selected=!0;return b.grid=c.grid,h+i>=c.numCols?{row:g+1,col:0}:{row:g,col:h+i}},b.currentTime=d.now,b.updateTimePhrases()}]),angular.module("qlocktwoAngularApp").service("TimeToPhrases",function(){var a=[{hour:1,word:"one"},{hour:2,word:"two"},{hour:3,word:"three"},{hour:4,word:"four"},{hour:5,word:"five"},{hour:6,word:"six"},{hour:7,word:"seven"},{hour:8,word:"eight"},{hour:9,word:"nine"},{hour:10,word:"ten"},{hour:11,word:"eleven"},{hour:12,word:"twelve"},{hour:13,word:"one"},{hour:14,word:"two"},{hour:15,word:"three"},{hour:16,word:"four"},{hour:17,word:"five"},{hour:18,word:"six"},{hour:19,word:"seven"},{hour:20,word:"eight"},{hour:21,word:"nine"},{hour:22,word:"ten"},{hour:23,word:"eleven"},{hour:24,word:"twelve"}],b=[{start:0,end:5,word:"clock"},{start:5,end:9,word:"five"},{start:10,end:14,word:"ten"},{start:15,end:19,word:"fifteen"},{start:20,end:29,word:"twenty"},{start:30,end:39,word:"thirty"},{start:40,end:49,word:"forty"},{start:50,end:59,word:"fifty"}];return{hours:a,minutes:b}}),angular.module("qlocktwoAngularApp").run(["$templateCache",function(a){a.put("views/about.html","<p>Created by Anastasios Zouzias (@zouzias)</p>"),a.put("views/qlocktwo.html",'<div class="row-fluid" fullscreen> <!--\n  <div class="text-center well well-sm">\n    {{currentTime | date:\'medium\'}}\n  </div>\n  --> <table class="table table-responsive fill"> <tbody> <tr ng-repeat="row in grid"> <td ng-repeat="c in row track by $index"> <div class="text-center letter-font" ng-style="{opacity : (c.selected && \'1\') || \'0.15\'}"> {{c.char}} </div> </td> </tr> </tbody></table> </div>')}]);